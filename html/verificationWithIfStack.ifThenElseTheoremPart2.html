<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>verificationWithIfStack.ifThenElseTheoremPart2</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="basicBitcoinDataType.html" class="Module">basicBitcoinDataType</a>

<a id="35" class="Keyword">module</a> <a id="42" href="verificationWithIfStack.ifThenElseTheoremPart2.html" class="Module">verificationWithIfStack.ifThenElseTheoremPart2</a> <a id="89" class="Symbol">(</a><a id="90" href="verificationWithIfStack.ifThenElseTheoremPart2.html#90" class="Bound">param</a> <a id="96" class="Symbol">:</a> <a id="98" href="basicBitcoinDataType.html#1041" class="Record">GlobalParameters</a><a id="114" class="Symbol">)</a> <a id="116" class="Keyword">where</a>

<a id="123" class="Keyword">open</a> <a id="128" class="Keyword">import</a> <a id="135" href="libraries.listLib.html" class="Module">libraries.listLib</a>
<a id="153" class="Keyword">open</a> <a id="158" class="Keyword">import</a> <a id="165" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="180" class="Keyword">hiding</a> <a id="187" class="Symbol">(</a><a id="188" href="Data.List.Base.html#1954" class="Function Operator">_++_</a><a id="192" class="Symbol">)</a>
<a id="194" class="Keyword">open</a> <a id="199" class="Keyword">import</a> <a id="206" href="libraries.natLib.html" class="Module">libraries.natLib</a>
<a id="223" class="Keyword">open</a> <a id="228" class="Keyword">import</a> <a id="235" href="Data.Nat.html" class="Module">Data.Nat</a>  <a id="245" class="Keyword">renaming</a> <a id="254" class="Symbol">(</a><a id="255" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="259" class="Symbol">to</a> <a id="262" class="Datatype Operator">_≤&#39;_</a> <a id="267" class="Symbol">;</a> <a id="269" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a> <a id="273" class="Symbol">to</a> <a id="276" class="Function Operator">_&lt;&#39;_</a><a id="280" class="Symbol">)</a>
<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="Data.List.html" class="Module">Data.List</a> <a id="304" class="Keyword">hiding</a> <a id="311" class="Symbol">(</a><a id="312" href="Data.List.Base.html#1954" class="Function Operator">_++_</a><a id="316" class="Symbol">)</a>
<a id="318" class="Keyword">open</a> <a id="323" class="Keyword">import</a> <a id="330" href="Data.Sum.html" class="Module">Data.Sum</a>
<a id="339" class="Keyword">open</a> <a id="344" class="Keyword">import</a> <a id="351" href="Data.Unit.html" class="Module">Data.Unit</a>  
<a id="363" class="Keyword">open</a> <a id="368" class="Keyword">import</a> <a id="375" href="Data.Empty.html" class="Module">Data.Empty</a>
<a id="386" class="Keyword">open</a> <a id="391" class="Keyword">import</a> <a id="398" href="Data.Bool.html" class="Module">Data.Bool</a>  <a id="409" class="Keyword">hiding</a> <a id="416" class="Symbol">(</a><a id="417" href="Data.Bool.Base.html#681" class="Datatype Operator">_≤_</a> <a id="421" class="Symbol">;</a> <a id="423" href="Data.Bool.Base.html#760" class="Datatype Operator">_&lt;_</a> <a id="427" class="Symbol">;</a> <a id="429" href="Data.Bool.Base.html#1505" class="Function Operator">if_then_else_</a> <a id="443" class="Symbol">)</a> <a id="445" class="Keyword">renaming</a> <a id="454" class="Symbol">(</a><a id="455" href="Data.Bool.Base.html#995" class="Function Operator">_∧_</a> <a id="459" class="Symbol">to</a> <a id="462" class="Function Operator">_∧b_</a> <a id="467" class="Symbol">;</a> <a id="469" href="Data.Bool.Base.html#1053" class="Function Operator">_∨_</a> <a id="473" class="Symbol">to</a> <a id="476" class="Function Operator">_∨b_</a> <a id="481" class="Symbol">;</a> <a id="483" href="Data.Bool.Base.html#1348" class="Function">T</a> <a id="485" class="Symbol">to</a> <a id="488" class="Function">True</a><a id="492" class="Symbol">)</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="Data.Product.html" class="Module">Data.Product</a> <a id="519" class="Keyword">renaming</a> <a id="528" class="Symbol">(</a><a id="529" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a> <a id="533" class="Symbol">to</a> <a id="536" class="InductiveConstructor Operator">_,,_</a> <a id="541" class="Symbol">)</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="569" class="Keyword">hiding</a> <a id="576" class="Symbol">(</a><a id="577" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="581" class="Symbol">;</a> <a id="583" href="Data.Nat.Base.html#1801" class="Function Operator">_&lt;_</a><a id="586" class="Symbol">)</a>
<a id="588" class="Keyword">open</a> <a id="593" class="Keyword">import</a> <a id="600" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="619" class="Keyword">hiding</a> <a id="626" class="Symbol">(</a><a id="627" href="Data.List.NonEmpty.Base.html#1291" class="Field">head</a><a id="631" class="Symbol">)</a>
<a id="633" class="Keyword">open</a> <a id="638" class="Keyword">import</a> <a id="645" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="654" class="Keyword">using</a> <a id="660" class="Symbol">(</a><a id="661" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="662" class="Symbol">;</a> <a id="664" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">_+_</a><a id="667" class="Symbol">;</a> <a id="669" href="Data.Nat.Base.html#2259" class="Function Operator">_≥_</a><a id="672" class="Symbol">;</a> <a id="674" href="Data.Nat.Base.html#2289" class="Function Operator">_&gt;_</a><a id="677" class="Symbol">;</a> <a id="679" href="Agda.Builtin.Nat.html#221" class="InductiveConstructor">zero</a><a id="683" class="Symbol">;</a> <a id="685" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a><a id="688" class="Symbol">;</a> <a id="690" href="Data.Nat.Base.html#1756" class="InductiveConstructor">s≤s</a><a id="693" class="Symbol">;</a> <a id="695" href="Data.Nat.Base.html#1714" class="InductiveConstructor">z≤n</a><a id="698" class="Symbol">)</a>
<a id="700" class="Keyword">import</a> <a id="707" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="745" class="Symbol">as</a> <a id="748" class="Module">Eq</a>
<a id="751" class="Keyword">open</a> <a id="756" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="759" class="Keyword">using</a> <a id="765" class="Symbol">(</a><a id="766" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="769" class="Symbol">;</a> <a id="771" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="775" class="Symbol">;</a> <a id="777" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="781" class="Symbol">;</a> <a id="783" class="Keyword">module</a> <a id="790" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a><a id="801" class="Symbol">;</a> <a id="803" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a><a id="806" class="Symbol">)</a>
<a id="808" class="Keyword">open</a> <a id="813" href="Relation.Binary.PropositionalEquality.Properties.html#6744" class="Module">≡-Reasoning</a>
<a id="825" class="Keyword">open</a> <a id="830" class="Keyword">import</a> <a id="837" href="Agda.Builtin.Equality.html" class="Module">Agda.Builtin.Equality</a>
<a id="859" class="Comment">--open import Agda.Builtin.Equality.Rewrite</a>
<a id="903" class="Comment">-- open import verificationWithIfStack.verificationP2PKH</a>

<a id="961" class="Keyword">open</a> <a id="966" class="Keyword">import</a> <a id="973" href="libraries.andLib.html" class="Module">libraries.andLib</a>

<a id="991" class="Keyword">open</a> <a id="996" class="Keyword">import</a> <a id="1003" href="libraries.maybeLib.html" class="Module">libraries.maybeLib</a>

<a id="1023" class="Keyword">open</a> <a id="1028" class="Keyword">import</a> <a id="1035" href="stack.html" class="Module">stack</a>
<a id="1041" class="Keyword">open</a> <a id="1046" class="Keyword">import</a> <a id="1053" href="stackPredicate.html" class="Module">stackPredicate</a>
<a id="1068" class="Keyword">open</a> <a id="1073" class="Keyword">import</a> <a id="1080" href="instruction.html" class="Module">instruction</a>
<a id="1092" class="Comment">-- open import ledger param</a>

<a id="1121" class="Keyword">open</a> <a id="1126" class="Keyword">import</a> <a id="1133" href="verificationWithIfStack.state.html" class="Module">verificationWithIfStack.state</a>
<a id="1163" class="Keyword">open</a> <a id="1168" class="Keyword">import</a> <a id="1175" href="verificationWithIfStack.predicate.html" class="Module">verificationWithIfStack.predicate</a>
<a id="1209" class="Keyword">open</a> <a id="1214" class="Keyword">import</a> <a id="1221" href="verificationWithIfStack.ifStack.html" class="Module">verificationWithIfStack.ifStack</a>
<a id="1253" class="Keyword">open</a> <a id="1258" class="Keyword">import</a> <a id="1265" href="verificationWithIfStack.semanticsInstructions.html" class="Module">verificationWithIfStack.semanticsInstructions</a> <a id="1311" href="verificationWithIfStack.ifThenElseTheoremPart2.html#90" class="Bound">param</a>
<a id="1317" class="Keyword">open</a> <a id="1322" class="Keyword">import</a> <a id="1329" href="verificationWithIfStack.verificationLemmas.html" class="Module">verificationWithIfStack.verificationLemmas</a> <a id="1372" href="verificationWithIfStack.ifThenElseTheoremPart2.html#90" class="Bound">param</a>
<a id="1378" class="Keyword">open</a> <a id="1383" class="Keyword">import</a> <a id="1390" href="verificationWithIfStack.hoareTriple.html" class="Module">verificationWithIfStack.hoareTriple</a> <a id="1426" href="verificationWithIfStack.ifThenElseTheoremPart2.html#90" class="Bound">param</a>
<a id="1432" class="Keyword">open</a> <a id="1437" class="Keyword">import</a> <a id="1444" href="verificationWithIfStack.ifThenElseTheoremPart1.html" class="Module">verificationWithIfStack.ifThenElseTheoremPart1</a> <a id="1491" href="verificationWithIfStack.ifThenElseTheoremPart2.html#90" class="Bound">param</a>



<a id="opIfCorrectness3test"></a><a id="1500" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1500" class="Function">opIfCorrectness3test</a> <a id="1521" class="Symbol">:</a> <a id="1523" class="Symbol">(</a> <a id="1525" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1525" class="Bound">ψ</a> <a id="1527" class="Symbol">:</a>  <a id="1530" href="stackPredicate.html#899" class="Function">StackPredicate</a> <a id="1545" class="Symbol">)</a> <a id="1547" class="Symbol">(</a><a id="1548" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1548" class="Bound">ifStack₁</a>  <a id="1558" class="Symbol">:</a> <a id="1560" href="verificationWithIfStack.ifStack.html#819" class="Function">IfStack</a><a id="1567" class="Symbol">)</a>
        <a id="1577" class="Symbol">(</a><a id="1578" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1578" class="Bound">active</a> <a id="1585" class="Symbol">:</a> <a id="1587" href="verificationWithIfStack.ifStack.html#1451" class="Function">IsActiveIfStack</a> <a id="1603" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1548" class="Bound">ifStack₁</a><a id="1611" class="Symbol">)</a>
          <a id="1623" class="Symbol">→</a> <a id="1625" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&lt;</a> <a id="1627" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a> <a id="1630" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&gt;ⁱᶠᶠ</a>  <a id="1636" class="Symbol">(</a> <a id="1638" href="instruction.html#1214" class="InductiveConstructor">opIf</a> <a id="1643" class="InductiveConstructor Operator">∷</a> <a id="1645" class="InductiveConstructor">[]</a><a id="1647" class="Symbol">)</a>
         <a id="1658" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&lt;</a> <a id="1660" href="verificationWithIfStack.predicate.html#8146" class="Function">liftStackPred2Pred</a> <a id="1679" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1525" class="Bound">ψ</a> <a id="1681" class="Symbol">(</a><a id="1682" href="verificationWithIfStack.ifStack.html#786" class="InductiveConstructor">ifIgnore</a> <a id="1691" class="InductiveConstructor Operator">∷</a> <a id="1693" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1548" class="Bound">ifStack₁</a><a id="1701" class="Symbol">)</a> <a id="1703" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&gt;</a>
<a id="1705" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1500" class="Function">opIfCorrectness3test</a>  <a id="1727" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1727" class="Bound">ψ</a> <a id="1729" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1729" class="Bound">ifStack₁</a> <a id="1738" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1738" class="Bound">active</a> <a id="1745" class="Symbol">=</a>
  <a id="1749" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a>
   <a id="1755" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">&lt;&gt;&lt;&gt;⟨</a> <a id="1761" href="instruction.html#1214" class="InductiveConstructor">opIf</a> <a id="1766" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1768" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1771" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">⟩⟨</a> <a id="1774" class="Symbol">(</a><a id="1775" href="verificationWithIfStack.ifThenElseTheoremPart1.html#12622" class="Function">opIfCorrectness3</a>  <a id="1793" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1727" class="Bound">ψ</a> <a id="1795" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1729" class="Bound">ifStack₁</a> <a id="1804" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1738" class="Bound">active</a><a id="1810" class="Symbol">)</a>  <a id="1813" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">⟩</a>
   <a id="1818" class="Symbol">(</a><a id="1819" href="verificationWithIfStack.predicate.html#8146" class="Function">liftStackPred2Pred</a> <a id="1838" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1727" class="Bound">ψ</a>  <a id="1841" class="Symbol">(</a><a id="1842" href="verificationWithIfStack.ifStack.html#786" class="InductiveConstructor">ifIgnore</a> <a id="1851" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1853" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1729" class="Bound">ifStack₁</a><a id="1861" class="Symbol">))</a>
  <a id="1866" href="verificationWithIfStack.hoareTriple.html#6627" class="Function Operator">∎p</a>


<a id="opIfCorrectness3test2"></a><a id="1871" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1871" class="Function">opIfCorrectness3test2</a> <a id="1893" class="Symbol">:</a> <a id="1895" class="Symbol">(</a><a id="1896" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1896" class="Bound">φ</a> <a id="1898" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1898" class="Bound">ψ</a> <a id="1900" class="Symbol">:</a>  <a id="1903" href="stackPredicate.html#899" class="Function">StackPredicate</a> <a id="1918" class="Symbol">)</a> <a id="1920" class="Symbol">(</a><a id="1921" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1921" class="Bound">ifStack₁</a>  <a id="1931" class="Symbol">:</a> <a id="1933" href="verificationWithIfStack.ifStack.html#819" class="Function">IfStack</a><a id="1940" class="Symbol">)</a>
                        <a id="1966" class="Symbol">(</a><a id="1967" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1967" class="Bound">active</a> <a id="1974" class="Symbol">:</a> <a id="1976" href="verificationWithIfStack.ifStack.html#1451" class="Function">IsActiveIfStack</a> <a id="1992" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1921" class="Bound">ifStack₁</a><a id="2000" class="Symbol">)</a> 
                        <a id="2027" class="Symbol">→</a> <a id="2029" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&lt;</a> <a id="2031" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a> <a id="2034" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&gt;ⁱᶠᶠ</a>  <a id="2040" class="Symbol">(</a> <a id="2042" href="instruction.html#1214" class="InductiveConstructor">opIf</a> <a id="2047" class="InductiveConstructor Operator">∷</a> <a id="2049" class="InductiveConstructor">[]</a><a id="2051" class="Symbol">)</a>
                           <a id="2080" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&lt;</a> <a id="2082" href="verificationWithIfStack.predicate.html#8146" class="Function">liftStackPred2Pred</a> <a id="2101" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1898" class="Bound">ψ</a>  <a id="2104" class="Symbol">(</a><a id="2105" href="verificationWithIfStack.ifStack.html#786" class="InductiveConstructor">ifIgnore</a> <a id="2114" class="InductiveConstructor Operator">∷</a> <a id="2116" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1921" class="Bound">ifStack₁</a><a id="2124" class="Symbol">)</a> <a id="2126" href="verificationWithIfStack.hoareTriple.html#1534" class="Record Operator">&gt;</a>
<a id="2128" href="verificationWithIfStack.ifThenElseTheoremPart2.html#1871" class="Function">opIfCorrectness3test2</a> <a id="2150" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2150" class="Bound">φ</a> <a id="2152" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2152" class="Bound">ψ</a> <a id="2154" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2154" class="Bound">ifStack₁</a> <a id="2163" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2163" class="Bound">active</a> <a id="2170" class="Symbol">=</a>
   <a id="2175" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a>
     <a id="2183" href="verificationWithIfStack.hoareTriple.html#7147" class="Function">&lt;=&gt;⟨</a> <a id="2188" href="verificationWithIfStack.hoareTriple.html#1925" class="Function">refl&lt;=&gt;</a> <a id="2196" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a>  <a id="2200" href="verificationWithIfStack.hoareTriple.html#7147" class="Function">⟩</a>
   <a id="2205" href="verificationWithIfStack.predicate.html#5745" class="Function">⊥p</a>
    <a id="2212" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">&lt;&gt;&lt;&gt;⟨</a> <a id="2218" href="instruction.html#1214" class="InductiveConstructor">opIf</a> <a id="2223" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2225" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="2228" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">⟩⟨</a>  <a id="2232" class="Symbol">(</a><a id="2233" href="verificationWithIfStack.ifThenElseTheoremPart1.html#12622" class="Function">opIfCorrectness3</a>  <a id="2251" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2152" class="Bound">ψ</a> <a id="2253" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2154" class="Bound">ifStack₁</a> <a id="2262" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2163" class="Bound">active</a><a id="2268" class="Symbol">)</a>  <a id="2271" href="verificationWithIfStack.hoareTriple.html#6721" class="Function">⟩</a>
    <a id="2277" class="Symbol">(</a><a id="2278" href="verificationWithIfStack.predicate.html#8146" class="Function">liftStackPred2Pred</a> <a id="2297" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2152" class="Bound">ψ</a>  <a id="2300" class="Symbol">(</a><a id="2301" href="verificationWithIfStack.ifStack.html#786" class="InductiveConstructor">ifIgnore</a> <a id="2310" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2312" href="verificationWithIfStack.ifThenElseTheoremPart2.html#2154" class="Bound">ifStack₁</a><a id="2320" class="Symbol">))</a>
   <a id="2326" href="verificationWithIfStack.hoareTriple.html#6627" class="Function Operator">∎p</a>


</pre></body></html>